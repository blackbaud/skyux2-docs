<sky-demo-page
  pageTitle="Modal"
  skyuxModule="SkyModalModule"
>

  <sky-demo-page-summary>
    <p>
      The modal component and service allow you to launch modals in a consistent way in SKY UX applications. The <stache-code>SkyModalService</stache-code> provider lauches modals, and the <stache-code>sky-modal</stache-code> component provides a common look-and-feel for modal content. Within the <stache-code>sky-modal</stache-code> component, you have options to display a common modal header, specify body content, and display a common modal footer and buttons. The <stache-code>SkyModalInstance</stache-code> class allows you to close the modal and return data from the launched modal. For information about how to test modals in SKY UX, see <a routerLink="/learn/get-started/advanced/unit-test-modals">write unit tests for modals</a>.
    </p>
    <sky-alert alertType="info">
      Keep in mind that modals are not child components. Any component in a SPA can use <stache-code>SkyModalService</stache-code> to launch a modal, but the modal is launched independently through the service.
    </sky-alert>
  </sky-demo-page-summary>

  <sky-demo-page-properties sectionHeading="Modal service methods">
    <sky-demo-page-property
      propertyName="open(component, config?)"
    >
    Opens a modal using the specified component. The optional <stache-code>config</stache-code> parameter is an object literal to be passed to the component's constructor. This method returns the modal instance.
    </sky-demo-page-property>
  </sky-demo-page-properties>

  <sky-demo-page-properties sectionHeading="Modal service config properties">
    <sky-demo-page-property
      propertyName="fullPage"
      defaultValue="false"
      isOptional="true"
    >
    Indicates whether to display the modal full screen.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="tiledBody"
      defaultValue="false"
      isOptional="true"
    >
    Indicates whether the modal uses tiles. When set to <stache-code>true</stache-code>, the modal's background switches to <stache-code>$sky-background-color-neutral-light</stache-code> and tile headings are styled as subsection headings.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="providers"
    >
    An array property of <stache-code>providers</stache-code>. In Angular, a provider is something that can create or deliver a service. This property can be used to pass context values from the component that launches the modal to the modal component.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="size"
      defaultValue="medium"
      isOptional="true"
    >
    Specifies a size for the modal. The valid options are <stache-code>small</stache-code>, <stache-code>medium</stache-code>, and <stache-code>large</stache-code>.
    </sky-demo-page-property>

    <sky-demo-page-property
      propertyName="ariaLabelledBy"
      isOptional="true"
    >
    Sets the <stache-code>aria-labelledby</stache-code> attribute for the modal dialog to support accessibility. The value should be an ID (without the leading <stache-code>#</stache-code>) that points to the element that labels the modal. Typically this is a header element. If no ID is specified, the default value is the content of the <stache-code>sky-modal-header</stache-code> component.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="ariaDescribedBy"
      isOptional="true"
    >
    Sets the <stache-code>aria-describedby</stache-code> attribute for the modal dialog to support accessibility. The value should be an ID (without the leading <stache-code>#</stache-code>) that points to the element that describes the modal. Typically, this is the text on the modal, not including anything that users interact with such as buttons or a form. If no ID is specified, the default value is the content of the <stache-code>sky-modal-content</stache-code> component.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="ariaRole"
      defaultValue="dialog"
      isOptional="true"
    >
    Specifies an ARIA role for the modal dialog to support accessibility by indicating how the modal functions and what it controls. The ARIA role indicates what the modal component represents on the web page. For information about ARIA roles, see the <a href="https://www.w3.org/WAI/PF/aria/roles">WAI-ARIA roles model</a>.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="helpKey"
      isOptional="true"
    >
    Specifies a <stache-code>helpKey</stache-code> string. This property dispays the <i class="fa fa-question-circle" aria-hidden="true"></i> button in the modal header. When users click this button, the <stache-code>helpOpened</stache-code> event broadcasts the <stache-code>helpKey</stache-code> parameter.
    </sky-demo-page-property>
  </sky-demo-page-properties>

  <sky-demo-page-properties sectionHeading="Modal component properties">
    <sky-demo-page-property
      propertyName="sky-modal-header"
    >
    Specifies a header for the modal.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="sky-modal-content"
    >
    Specifies content to display in the modal's body.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="sky-modal-footer"
    >
    Specifies content to display in the modal's footer.
    </sky-demo-page-property>
  </sky-demo-page-properties>

  <sky-demo-page-properties sectionHeading="Modal instance methods">
    <sky-demo-page-property
      propertyName="save(result?)"
    >
    Closes the modal instance with <stache-code>reason=save</stache-code>. The optional <stache-code>result</stache-code> parameter specifies an object that will be emitted to subscribers of the <stache-code>closed</stache-code> event of the modal instance. The <stache-code>SkyModalInstance</stache-code> provider can be injected into a component's constructor so that this <stache-code>save</stache-code> function can be called from a button in the <stache-code>sky-modal-footer</stache-code>.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="cancel(result?)"
    >
    Closes the modal instance with <stache-code>reason=cancel</stache-code>. The optional <stache-code>result</stache-code> parameter specifies an object that will be emitted to subscribers of the <stache-code>closed</stache-code> event of the modal instance. The <stache-code>SkyModalInstance</stache-code> provider can be injected into a component's constructor so that this <stache-code>cancel</stache-code> function can be called from a button in the <stache-code>sky-modal-footer</stache-code>.
    </sky-demo-page-property>
     <sky-demo-page-property
      propertyName="close(result?, reason?)"
    >
    Closes the modal instance. The optional <stache-code>result</stache-code> parameter specifies an object that will be emitted to subscribers of the <stache-code>closed</stache-code> event of the modal instance, and it specifies a string that indicates the reason for the modal closing, with the default reason of <stache-code>close</stache-code>. The <stache-code>SkyModalInstance</stache-code> provider can be injected into a component's constructor so that this <stache-code>close</stache-code> function can be called from a button in the <stache-code>sky-modal-footer</stache-code>.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="openHelp(helpKey?)"
    >
    Triggers the <stache-code>helpOpened</stache-code> event. The optional <stache-code>helpKey</stache-code> parameter specifies a string to emit to subscribers of the modal instance's <stache-code>helpOpened</stache-code> event. You can inject the <stache-code>SkyModalInstance</stache-code> provider into a component's constructor to call the <stache-code>openHelp</stache-code> function in the modal template.
    </sky-demo-page-property>
  </sky-demo-page-properties>

  <sky-demo-page-properties sectionHeading="Modal instance events">
    <sky-demo-page-property
      propertyName="beforeClose"
    >
      An event that the modal instance emits when it is about to close. It emits a <stache-code>SkyModalBeforeCloseHandler</stache-code> object with a <stache-code>closeModal</stache-code> method that closes the modal. If a subscription exists for this event, the modal does not close until the subscriber calls the <stache-code>closeModal</stache-code> method.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="closed"
    >
    An event that the modal instance emits when it closes. It emits a <stache-code>SkyCloseModalArgs</stache-code> object with a <stache-code>data</stache-code> property that includes data passed from users on close or save and a <stache-code>reason</stache-code> property that indicates whether the modal was saved or closed without saving.
    </sky-demo-page-property>
    <sky-demo-page-property
      propertyName="helpOpened"
    >
    An event that the modal instance emits when users click the <i class="fa fa-question-circle" aria-hidden="true"></i> button. If a <stache-code>helpKey</stache-code> parameter was specified, the <stache-code>helpOpened</stache-code> event broadcasts the <stache-code>helpKey</stache-code>.
    </sky-demo-page-property>
  </sky-demo-page-properties>

  <sky-demo-page-example>
    <sky-modal-demo></sky-modal-demo>
    <sky-demo-page-code demoName="Modal"></sky-demo-page-code>
  </sky-demo-page-example>

  <sky-demo-page-content sectionHeading="Accessibility">
    <p>Follow these guidelines to ensure that people can use modals with assistive technology or keyboards.</p>
    <ul>
      <li>When a modal opens, focus should be on the first focusable item in the modal. If the modal does not include focusable items, then focus should be on the modal container element.</li>
      <li>While a modal is open, focus should remain on elements in the modal when using Tab key to navigate. Focus should not move back to the initiating page behind the modal. At the end of the modal, the Tab key should return focus to the first focusable item in the modal. Conversely, at the top of the modal, the Shift+Tab keys should switch focus to the last focusable item in the modal. </li>
      <li>When a modal closes, focus should return to the element that had focus before the modal opened. Usually this is the element that opened the modal.</li>
    </ul>
  </sky-demo-page-content>

	<sky-demo-page-content sectionHeading="UX guidelines">
		<div class="sky-subsection-heading">Modal title text</div>
			<p>In general, use the following format for modal titles:</p>
			<p><span class="sky-emphasized">&lt;Verb&gt; &lt;direct object&gt; for &lt;indirect object&gt;</span></p>
			<div style="margin-bottom: 20px;">
				<img class="screenshot screenshot-info" src="~/assets/img/guidelines/wording/modal-with-object.png" alt="modal title: Edit address for Robert Hernandez"/>
			</div>
			<p>If there is not an indirect object or the user is the implied indirect object, you can exclude it:</p>
			<p><span class="sky-emphasized">&lt;Verb&gt; &lt;direct object&gt;</span></p>
			<div style="margin-bottom: 20px;">
				<img class="screenshot screenshot-info" src="~/assets/img/guidelines/wording/modal-without-object.png" alt="modal title: Manage bank feeds"/>
			</div>
  	<div class="sky-subsection-heading">Usage</div>
			<div class="sky-emphasized">Modal</div>
			<p>A modal dialog is appropriate for forms that meet any of the following criteria:</p>
			<ul>
				<li>The task is functionally modal, and users must finish it before doing anything else.</li>
				<li>Displaying the form inline would lead to substantial content shifting or require users to scroll to complete the form.</li>
				<li>The form adds records from a paginated list or an infinite scroll list.</li>
			</ul>
			<div class="sky-emphasized">Full-page modal</div>
			<p>A full-page modal is appropriate for forms that meet the following criteria:</p>
			<ul>
				<li>The task is functionally modal, and users must finish it before doing anything else.</li>
				<li>Users usually perform the task in a large viewport, and a full-page modal can optimize the use of space.</li>
				<li>The context of the task is self-contained.</li>
				<li>The form displays ancillary information or previews such as running totals or an email being constructed.</li>
				<li>The form supports a complex task for a list of objects such as filling out report cards for a class.</li>
				<li>The task includes subtasks that need to be completed in context.</li>
			</ul>
  </sky-demo-page-content>

</sky-demo-page>
