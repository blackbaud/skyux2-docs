<stache
  pageTitle="SKY UX SDK Extensibility"
  navTitle="Extensibility"
  showTableOfContents="true"
  navOrder="11">

  <stache-page-summary>
    <p>
      The SKY UX SDK is comprised of two main modules - the SKY UX CLI and the SKY UX Builder.  The CLI is globally installed whereas Builder is installed in each repository.  This allows individual SPAs to dicate the version of the builder they use.
    </p>
  </stache-page-summary>

  <stache-markdown>

## SKY UX CLI

The SKY UX CLI has a few main purposes.

First, it provides `skyux` as a known command from any location on your system. Internally, it handles a few commands such as `skyux new` and `skyux help`.  These commands make sense to run anywhere and are not limited to the context of an already created SPA.

Second, it handles locating any other packages, installed globally or in the current working directory, which are setup to handle the command.

Second, it's job is to locate any plugins, either globally or locally based on the current working directory, and pass the specified command to them. SKY UX Builder is the most common example of a module versioned in a specific directory that handles commands.  For example, `skyux build` is handled handled by SKY UX Builder, but is passed to it from SKY UX CLI.

## SKY UX Builder

SKY UX Builder is intended to be listed as a `devDependency` for every SPA.  The majority of commands are handled through it.  Testing, serving, and building are all functions of SKY UX Builder.  As such, it wraps up the logic and configuration for other tools such as the Angular Compiler, Webpack, Karma, and Protractor.

## SKY UX CLI Plugins

SKY UX CLI is extensible.  By following the guidelines below, it is possible to create custom commands and modules to handle those commands.

- The module must be installed globally or locally.
- The module's name must begin with either `skyux-builder` or `@skyux-sdk/builder`.
- The module must specify the `main` property in its `package.json` or contain an `index.js` in the root.  One of this is necessary in order for your module to be used with `require()`.
- The module must expose a `runCommand` method.  This method is called with two params, the requested command and an arguments object as processed by <a href="#">minimist</a>.  This method should return a boolean as to whether it successfully handled the command.

As an example of whatever file you choose to satisfy the last requirement above:

```
module.exports = {
  runCommand(command, argv) {
    switch (command) {
      case 'customCommand':
        // Do something here
        return true;

      default:
        return false;
    }
  }
}
```

## SKY UX Builder Plugins

Add the package as a dependency in `package.json`.

```
{
  "dependencies": {
    "skyux-builder-plugin-example": "1.0.0"
  }
}
```

In the `skyuxconfig.json` file, specify the module in the `plugins` array.  For example:

```
{
  "plugins": [
    "skyux-builder-plugin-example"
  ]
}
```

Your package must contain one of the following:
  - The `package.json` must specify the `main` property which points to a valid JavaScript file.
  - An `index.js` file in the root.

As an example of whatever file you choose to satisfy the above requirement:

```
module.exports = {
  // content = a string representation of the file's contents
  // resourcePath = the absolute path to the file
  // skyPagesConfig = the prepared config that includes skyuxconfig.json and builder's defaults
  preload(content, resourcePath, skyPagesConfig) {
    return content;
  }
}
```

</stache-markdown>
</stache>
