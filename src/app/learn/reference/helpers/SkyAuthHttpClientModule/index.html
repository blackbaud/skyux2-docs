<stache
  pageTitle="SkyAuthHttpClientModule"
  showTableOfContents="true">

  <stache-page-summary>
    <p>
      <sky-code>SkyAuthHttpClientModule</sky-code> enables SKY UX SPAs to use Angular's <sky-code>HttpClient</sky-code> service instead of the deprecated <sky-code>Http</sky-code> service. SKY UX SPAs can use <sky-code>HttpClient</sky-code> directly, but they need to supply the <sky-code>skyAuthHttpOptions()</sky-code> function to HTTP calls to capture Blackbaud URL params such as <sky-code>leid</sky-code> and <sky-code>envid</sky-code>.
    </p>
  </stache-page-summary>

  <stache-page-anchor>
    Use <sky-code>SkyAuthHttpClientModule</sky-code> to communicate with backend services
  </stache-page-anchor>

  <ol>
    <li>
      <p>
        In a local editor, open the <sky-code>skyuxconfig.json</sky-code> file in the root directory and set <a stacheRouterLink="/learn/reference/configuration" fragment="auth">the <sky-code>auth</sky-code> configuration property</a> to <sky-code>true</sky-code>.
      </p>
      <sky-code-block languageType="json">
        {
          "auth": true
        }
      </sky-code-block>
    </li>
    <li>
      <p>
        Open the <sky-code>app-extras.module.ts</sky-code> file in the <sky-code>src/app</sky-code> directory. Import <sky-code>SkyAuthHttpClientModule</sky-code> from <sky-code>@skyux/http</sky-code> and add it to the Angular module’s <sky-code>exports</sky-code> section.
      </p>
      <sky-code-block languageType="typescript">
        import {
          SkyAuthHttpClientModule
        } from '@skyux/http';

        @NgModule({
          exports: [
            SkyAuthHttpClientModule
          ]
        })
        export class AppExtrasModule { }
      </sky-code-block>
    </li>
    <li>
      <p>
        Use the <sky-code>HttpClient</sky-code> service instead of <sky-code>SkyAuthHttp</sky-code> to communicate between the front-end application and backend services. To make authenticated calls, pass in the result of <sky-code>skyAuthHttpOptions()</sky-code>, which is also defined by <sky-code>@skyux/http</sky-code>, to the <sky-code>HttpClient</sky-code> methods.
      </p>
      <sky-code-block languageType="typescript">
        import {
          HttpClient
        } from '@angular/common/http';

        import {
          skyAuthHttpOptions
        } from '@skyux/http';

        @Component({
          selector: 'app-foo',
          templateUrl: './foo.component.html'
        })
        export class FooComponent implements OnInit {
          constructor(
            private http: HttpClient
          ) { }

          public ngOnInit(): void {
            // Available options are defined here:
            // https://github.com/blackbaud/skyux-http/blob/master/src/app/public/modules/auth-http-client/auth-options.ts#L20-L29
            const options: any = {};

            this.http.get('my/api/endpoint', skyAuthHttpOptions(options));
          }
        }
      </sky-code-block>
    </li>
  </ol>

  <stache-page-anchor>
    <sky-code>skyAuthHttpOptions</sky-code> options
  </stache-page-anchor>

  <ul>
    <li>
      <sky-code>body</sky-code> — <em>(Optional.)</em> Specifies the body to use when creating <a href="https://angular.io/api/http/Request">a <sky-code>Request</sky-code> instance</a>.
    </li>
    <li>
      <sky-code>headers</sky-code> — <em>(Optional.)</em> Specifies <a href="https://angular.io/api/http/Headers">the <sky-code>Headers</sky-code> instance</a> to attach to <a href="https://angular.io/api/http/Request">the <sky-code>Request</sky-code> instance</a>.
    </li>
    <li>
      <sky-code>observe</sky-code> — <em>(Optional.)</em> Specifies the return type of the observable. The valid options are <sky-code>body</sky-code>, <sky-code>events</sky-code>, and <sky-code>response</sky-code>.
    </li>
    <li>
      <sky-code>params</sky-code> — <em>(Optional.)</em> Specifies the search parameters to include in <a href="https://angular.io/api/http/Request">the <sky-code>Request</sky-code> instance</a>.
    </li>
    <li>
      <sky-code>permissionScope</sky-code> — <em>(Optional.)</em> Specifies permissions for the <sky-code>HttpInterceptor</sky-code> interface to intercept and modify HTTP requests globally. This property accepts <sky-code>string</sky-code> values.
    </li>
    <li>
      <sky-code>reportProgress</sky-code> — <em>(Optional.)</em> Indicates whether to enable tracking of progress events. This property accepts <sky-code>boolean</sky-code> values. <em>(Default: false)</em>
    </li>
    <li>
      <sky-code>responseType</sky-code> — <em>(Optional.)</em> Specifies how to parse a successful response body. The valid options are <sky-code>arraybuffer</sky-code>, <sky-code>blob</sky-code>, <sky-code>json</sky-code>, and <sky-code>text</sky-code>. <em>(Default: json)</em>
    </li>
    <li>
      <sky-code>withCredentials</sky-code> — <em>(Optional.)</em> Indicates whether to enable use credentials for <a href="https://angular.io/api/http/Request">the <sky-code>Request</sky-code> instance</a>. This property accepts <sky-code>boolean</sky-code> values. <em>(Default: false)</em>
    </li>
  </ul>

</stache>
