<stache
  pageTitle="Contribution guidelines"
  navTitle="Guidelines"
  showTableOfContents="true"
  layout="sidebar"
  navOrder="4">

  <stache-page-summary>
    <p>
      We highly encourage contributions from all SKY UX users, and we ask that you follow these general guidelines so we can review and accept your contributions in a timely fashion.
    </p>
    <p>
      For Blackbaud developers, see additional <a href="https://docs.blackbaud.com/skyux-team-docs/style">style guidelines for authoring SKY UX components</a> in our team documentation site. This internal Blackbaud-only site is not available to external developers.
    </p>
  </stache-page-summary>

  <stache-page-anchor>
    File an issue
  </stache-page-anchor>
  <p>
    Before you start any work, <a stacheRouterLink="/contribute/contribution-process/file-issue">file an issue</a>. The sooner we discuss potential code changes, the better.
  </p>

  <stache-page-anchor>
    Accessibility tests
  </stache-page-anchor>
  <p>
    All new components and changes to existing components require passing accessibility tests. This includes automated tests to run during visual regression tests as well as code review and manual keyboard tests. For more information about accessibility tests, see the <a stacheRouterLink="/learn/accessibility">accessibility section</a> and the <a stacheRouterLink="/learn/reference/tests" fragment="accessibility-tests">testing reference</a>.
  </p>

  <stache-page-anchor>
    API changes
  </stache-page-anchor>
  <p>
    For API changes that affect inputs and outputs for a component, we recommend that you provide your potential (not working) documentation and demo to the SKY UX team for review. This lets us address API issues before implementation. Contributors should keep in mind that the API can change in the course of development.
  </p>

  <stache-page-anchor>
    Components
  </stache-page-anchor>
  <p>
    <stache-include fileName="component-files.html"></stache-include>
  </p>
  <stache-include fileName="small-components.html"></stache-include>

  <stache-page-anchor>
    Demos and documentation
  </stache-page-anchor>
  <p>
    All new components must include demos to accompany the <a stacheRouterLink="/components">components reference documentation</a>. Demos must include all or most features available to the components and examples of all inputs and outputs. In the <a href="https://github.com/blackbaud/skyux2-docs">SKY UX docs repo</a>, you create subfolders for your components in the <sky-code>src/demos</sky-code> folder and add TypeScript and HTML files for the demos. You create <sky-code>{{ '{' }}componentName}-demo.component.html</sky-code> files to provide HTML templates for demos, <sky-code>{{ '{' }}componentName}-demo.component.ts</sky-code> files to handle the logic, and <sky-code>index.ts</sky-code> files to export demos. For examples of existing demos, see the <a stacheRouterLink="/components">components documentation</a>.
  </p>
  <p>
    We also strongly encourage you to create your own documentation for any feature you contribute because it can be useful to uncover issues. If you do not document your components or need assistance from a SKY UX writer, <a href="https://github.com/blackbaud/skyux2-docs/issues">file an issue in the SKY UX docs repo</a>. Component documentation should explain all features of your components, including all properties and events. In the SKY UX docs repo, you create subfolders for your components in the <sky-code>src/app/components</sky-code> folder and document them in <sky-code>index.html</sky-code> files. To create action buttons for the Components section landing page, you add entries in the <sky-code>demo-components.service.ts</sky-code> file.
  </p>

  <stache-page-anchor>
    Localization
  </stache-page-anchor>
  <p>
    To declare localization strings, specify a string name and provide the string and a description in the <sky-code>resources_en_US.json</sky-code> file in <sky-code>src/assets/locales</sky-code>. You can reference the localization strings with the <sky-code>skyLibResources</sky-code> pipe or the <sky-code>SkyLibResourcesService</sky-code> service in <sky-code>@skyux/i18n</sky-code>. For more information, see the <a stacheRouterLink="/learn/get-started/advanced/localization">localization guidance</stacheRouterLink>.
  </p>

  <stache-page-anchor>
    Pull requests
  </stache-page-anchor>
  <p>
    For large changes that include multiple components, submit changes in several small pull requests instead of one large pull request. We define large as more than 50 files.
  </p>
  <ul>
    <li>
      Small pull requests allow the SKY UX team to review your code in manageable pieces. It's much easier to review 3 pull requests with 50 files than 1 pull request with 150 files.
    </li>
    <li>
      They also speed up the review process. Catching pervasive coding style changes in a small code review allows you to update the rest of your code before you submit it.
    </li>
    <li>
      Small pull requests demonstrate that your code is modular and does not contain excessive interdependencies. For instance, if Component B is a child component of Component A, you should be able to author, test, document, review, and release Component B in the absence of Component A. If your changes must include both Component A and Component B for testing and review, then it raises a red flag that the components may be too tightly coupled and should be refactored.
    </li>
  </ul>

  <stache-page-anchor>
    <sky-code>Sky</sky-code> prefix
  </stache-page-anchor>
  <p>
    Use the <sky-code>Sky</sky-code> prefix when naming all classes, directives, services, components, etc. The prefix indicates to other contributors that items are owned by SKY UX and not a third-party library. It also prevents potential class-name clashes with other libraries. Keep in mind that while we generally use the uppercase <sky-code>Sky</sky-code> prefix, we also use the <sky-code>sky-</sky-code> prefix in some cases, such as selector properties in components.
  </p>

  <stache-page-anchor>
    Test fixtures
  </stache-page-anchor>
  <p>
    To deny access to public properties and methods on component classes, SKY UX does not export components from the exports API. This protects against potential breaking changes when the source code changes. Instead of querying against the component itself, consumers can use each component's companion test fixture, which is exported from the package's testing module.
  </p>
  <p>
    When you create components, include test fixtures so that consumers can use them in unit tests to query against the components.
  </p>


  <stache-page-anchor>
    Unit tests
  </stache-page-anchor>
  <p>
    All new code requires 100 percent unit test code coverage. This doesn't guarantee that every use case is accounted for, but anything less than 100 percent code coverage guarantees that at least one use case is not accounted for. This can be verified by running tests with <sky-code>npm run watch</sky-code> and viewing the code coverage results in <sky-code>coverage/Chrome xx.x.xxxx/index.html</sky-code>.
  </p>
  <p>
    For new components, we recommend that you reach out to the SKY UX team for a "soft" review of the initial implementation before you write unit tests. This allows you to make requested changes to your code before writing the tests. For more information about unit tests, see the <a stacheRouterLink="/learn/reference/tests" fragment="unit-tests">testing reference</a>.
  </p>

  <stache-page-anchor>
    Visual regression tests
  </stache-page-anchor>
  <p>
    All new components and visual changes to existing components require visual regression tests. This ensures that future changes to CSS or markup will not cause components to render in an unexpected manner. Visual tests consist of three parts: an HTML template for the component to test, a TypeScript file for the component to test, and the actual file that runs the test using <a href="https://webdriver.io/">webdriver.io</a> and our custom screenshot functions. For more information about visual regression tests, see the <a stacheRouterLink="/learn/reference/tests" fragment="end-to-end-e2e-tests">testing reference</a>.
  </p>

</stache>
