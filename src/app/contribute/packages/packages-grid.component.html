<sky-grid
  fit="width"
  [data]="packages"
  (sortFieldChange)="sortChanged($event)">
  <sky-grid-column
    field="id"
    heading="Package Name"
    [template]="templateColumnPackage">
  </sky-grid-column>
  <sky-grid-column
    field="repo"
    heading="Repository"
    [template]="templateColumnRepository">
  </sky-grid-column>
  <sky-grid-column
    field="id"
    heading="Version"
    [isSortable]="false"
    [template]="templateColumnVersion">
  </sky-grid-column>
</sky-grid>

<ng-template
  let-row="row"
  #templateColumnPackage>
  <div *ngIf="row.npm !== false">
    <a [href]="'https://npmjs.com/package/' + row.id">
      {{ row.id }}
    </a>
  </div>
  <div *ngIf="row.npm === false">
    {{ row.id }}
  </div>
</ng-template>

<ng-template
  let-row="row"
  #templateColumnVersion>
  <img
    *ngIf="row.npm !== false"
    [src]="'https://img.shields.io/npm/v/' + row.id + '.svg'">
  <span
    *ngIf="row.npm === false"
    class="sky-deemphasized">
    NA
  </span>
</ng-template>

<ng-template
  let-row="row"
  #templateColumnRepository>
  <a [href]="row.repoUrl" *ngIf="row.repo && row.repoUrl">
    {{ row.repo }}
  </a>
</ng-template>
